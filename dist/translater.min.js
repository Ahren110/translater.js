!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.Translater=n()}(this,function(){function e(){for(var e=l(document),a=[],r=new Object,o=0;o<e.length;o++)e[o].nodeValue=t(e[o].nodeValue),""!==e[o].nodeValue&&(r=n(e[o]),Object.getOwnPropertyNames(r).length>2&&a.push(r));return a}function n(e,a){a=a||{};var l="lang-default",r=e.nodeValue,o=/^\{\w+\}/;8===e.nodeType&&o.test(r)&&(l=r.match(o)[0],l="lang-"+(l?l.replace(/\{([^\ ]*)\}/g,"$1"):""),r=r.replace(o,""),""!==t(r)&&(a[l]=r)),""===t(r)||a["lang-default"]||(a[l]=r,a.element=e);var u=e.nextSibling;return u&&1!==u.nodeType&&n(u,a),a}function t(e){return""+(null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\r\n]+/g,""))}var a=function(n,t){this.lang_name=n&&n.lang||"default",this.callback=t||function(){},this.langs=e()||[],"default"!==n.lang&&this.setLang(n.lang)};a.prototype={setLang:function(e){var n=this.langs;this.lang_name=e;for(var t=0;t<n.length;t++)n[t]["lang-"+e]&&(n[t].element.nodeValue=n[t]["lang-"+e])}};var l=window.NodeFilter?function(e){var n,t,a=[];for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);n=t.nextNode();)"SCRIPT"!==n.parentElement.tagName&&"STYLE"!==n.parentElement.tagName&&a.push(n);return a}:function(e){switch(e.nodeType){case 3:return[e];case 1:case 9:var n,t=e.childNodes,a=[];if("SCRIPT"!==e.tagName&&"STYLE"!==e.tagName){for(n=0;n<t.length;n++)l(t[n])&&a.push(l(t[n]));return Array.prototype.concat.apply([],a)}}};return a});