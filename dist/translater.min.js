!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.Translater=n()}(this,function(){function e(){for(var e=r(document),n=[],l=new Object,o=0;o<e.length;o++)e[o].nodeValue=a(e[o].nodeValue),""!==e[o].nodeValue&&(l=t(e[o]),Object.getOwnPropertyNames(l).length>2&&n.push(l));return n}function n(e){var n={},t=e.nodeValue,a=0;if(n.element=e.parentElement,n["lang-default"]=t.replace(/<!--(.*)-->.*/,""),t&&(t=e.nodeValue.match(/<!--\{\w+\}[\s\S]*?-->/gi)),t&&t.length>0)for(;a<t.length;a++){var l=t[a].match(/\{([^\ ]*)\}/)[0];l=l.replace(/\{([^\ ]*)\}/g,"$1"),n["lang-"+l]=t[a].replace(/<!--\{\w+\}(.*)-->/g,"$1")}return e.parentElement.innerHTML=n["lang-default"],n}function t(e,l){if(l=l||{},e.parentElement&&"TITLE"===e.parentElement.tagName)return n(e);var r="lang-default",o=e.nodeValue,u=/^\{\w+\}/;8===e.nodeType&&u.test(o)&&(r=o.match(u)[0],r="lang-"+(r?r.replace(/\{([^\ ]*)\}/g,"$1"):""),o=o.replace(u,""),""!==a(o)&&(l[r]=o)),""===a(o)||l["lang-default"]||(l[r]=o,l.element=e);var c=e.nextSibling;return c&&1!==c.nodeType&&t(c,l),l}function a(e){return""+(null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\r\n]+/g,""))}var l=function(n,t){this.lang_name=n&&n.lang||"default",this.callback=t||function(){},this.langs=e()||[],n&&"default"!==n.lang&&this.setLang(n.lang)};l.prototype={setLang:function(e){var n=this.langs;this.lang_name=e;for(var t=0;t<n.length;t++)n[t]["lang-"+e]&&("TITLE"===n[t].element.tagName?n[t].element.innerHTML=n[t]["lang-"+e]:n[t].element.nodeValue=n[t]["lang-"+e])}};var r=window.NodeFilter?function(e){var n,t,a=[];for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);n=t.nextNode();)"SCRIPT"!==n.parentElement.tagName&&"STYLE"!==n.parentElement.tagName&&a.push(n);return a}:function(e){switch(e.nodeType){case 3:return[e];case 1:case 9:var n,t=e.childNodes,a=[];if("SCRIPT"!==e.tagName&&"STYLE"!==e.tagName){for(n=0;n<t.length;n++)r(t[n])&&a.push(r(t[n]));return Array.prototype.concat.apply([],a)}}};return l});